name: Auto Deploy Status

on:
  push:
    branches: [ main, master ]

jobs:
  deployment-status:
    name: ğŸ“Š Check Deployment Status
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ” Wait for Render deployment
        run: |
          echo "â³ Waiting for Render to deploy backend..."
          sleep 30
      
      - name: ğŸ¥ Health check backend
        run: |
          echo "ğŸ” Checking backend health..."
          for i in {1..10}; do
            if curl -f https://tic-tac-toe-vtht.onrender.com/api/health; then
              echo "âœ… Backend is healthy!"
              break
            else
              echo "â³ Attempt $i/10 failed, retrying in 30s..."
              sleep 30
            fi
          done
      
      - name: ğŸ¨ Check frontend deployment
        run: |
          echo "âœ… Vercel deployment triggered automatically"
          echo "ğŸ“Š Check status at: https://vercel.com"
      
      - name: ğŸ‰ Deployment complete
        run: |
          echo ""
          echo "ğŸ‰ Â¡Deployment completado!"
          echo ""
          echo "ğŸ”— URLs:"
          echo "  Backend:  https://tic-tac-toe-vtht.onrender.com"
          echo "  API Docs: https://tic-tac-toe-vtht.onrender.com/docs"
          echo "  Frontend: Vercel dashboard"

